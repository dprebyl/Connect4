for(t=(r=>z("m","m"+r)),e=(r=>document.getElementById(r)),z=((r="p",t=p)=>e(r).lang=t),g=((r,t)=>r<1||t<1||r>6||t>7?0:e("c"+r+t).lang),o=0,p="p",z(),t(1),r=6;r>0;r--){for(h="<tr>",c=1;c<8;c++)h+="<td id=c"+r+c+" lang=b onclick=m("+c+")>";e("b").innerHTML+=h}m=(c=>{if(l=(()=>{for(r=1;r<7;r++)if("b"==g(r,c))return r}),w=((t,n=1)=>{for(i=-3;i<4;i++)if(count=g(r+t*i,c+n*i)==p?++count:0,count>3)return 1}),o&&(location=""),r=l(),z("c"+r+c),w(0)||w(1,0)||w(1)||w(-1))t(3);else{for(p=p>"p"?"p":"q",z(),t(2),c=1;c<8;c++)if(l())return;t(4)}o=1});