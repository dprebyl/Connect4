for(g=0,p="p0",z(),t(1),r=6;r>0;r--){for(h="<tr>",c=1;c<8;c++)h+="<td id=c"+r+c+" lang=b onclick=m("+c+")>";e("b").innerHTML+=h}function m(n){if(g&&(location=""),r=o(),z("c"+r+n),c(0)||c(1,0)||c(1)||c(-1))t(3);else{for(p="p"+(1-p.substr(1)),z(),t(2),n=1;n<8;n++)if(o())return;t(4)}function c(t,c=1){for(i=-3;i<4;i++)if(count=u(r+t*i,n+c*i)==p?++count:0,count>3)return 1}function o(){for(r=1;r<7;r++)if("b"==u(r,n))return r}function u(r,n){return r<1||n<1||r>6||n>7?0:e("c"+r+n).lang}g=1}function t(r){z("m","m"+r)}function e(r){return document.querySelector("#"+r)}function z(r="p",n=p){e(r).lang=n}